@echo off
chcp 65001 > nul
title ุชุดุบูู ุงููุณุฎุฉ ุงูููุตุญุญุฉ - ุชุณุฌูู ุงูุฏุฎูู

color 0A
cls
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ              ๐ ุงููุณุฎุฉ ุงูููุตุญุญุฉ                              โ
echo โ                                                              โ
echo โ         ุชู ุญู ุฌููุน ูุดุงูู ุชุณุฌูู ุงูุฏุฎูู                        โ
echo โ                                                              โ
echo โ              RASHID INDUSTRIAL CO.                          โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.

cd /d "%~dp0"

echo ๐ ุฅููุงู ุงูุนูููุงุช ุงูุณุงุจูุฉ...
taskkill /f /im python.exe >nul 2>&1
taskkill /f /im py.exe >nul 2>&1

echo ๐ ูุญุต ุงููููุงุช ุงููุทููุจุฉ...
if not exist "app_fixed.py" (
    echo โ ููู app_fixed.py ุบูุฑ ููุฌูุฏ!
    echo ๐ง ุชุดุบูู ุงูุฅุตูุงุญ ุฃููุงู...
    py ุฅุตูุงุญ_ููุงุฆู_ุชุณุฌูู_ุงูุฏุฎูู.py
    if not exist "app_fixed.py" (
        echo โ ูุดู ูู ุฅูุดุงุก ุงููุณุฎุฉ ุงูููุตุญุญุฉ
        pause
        exit /b 1
    )
)

echo โ ุงููุณุฎุฉ ุงูููุตุญุญุฉ ููุฌูุฏุฉ

echo ๐ ุงูุจุญุซ ุนู Python...
set PYTHON_CMD=
py --version >nul 2>&1 && set PYTHON_CMD=py && goto :run_fixed
python --version >nul 2>&1 && set PYTHON_CMD=python && goto :run_fixed
python3 --version >nul 2>&1 && set PYTHON_CMD=python3 && goto :run_fixed

echo โ Python ุบูุฑ ููุฌูุฏ!
pause
exit /b 1

:run_fixed
echo โ Python: %PYTHON_CMD%

echo ๐ฆ ูุญุต Flask...
%PYTHON_CMD% -c "import flask" >nul 2>&1
if errorlevel 1 (
    echo ๐ฅ ุชุซุจูุช Flask...
    %PYTHON_CMD% -m pip install flask --user --quiet
    echo โ ุชู ุชุซุจูุช Flask
) else (
    echo โ Flask ูุชููุฑ
)

echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ                ๐ ุชุดุบูู ุงููุณุฎุฉ ุงูููุตุญุญุฉ                      โ
echo โ                                                              โ
echo โ  โ ุชู ุญู ุฌููุน ูุดุงูู ุชุณุฌูู ุงูุฏุฎูู                           โ
echo โ  โ ุชู ุญู ูุดุงูู ุงูุงูุชูุงู ูููุงุฌูุฉ ุงูุฑุฆูุณูุฉ                   โ
echo โ  โ ุชุดุฎูุต ุดุงูู ููุฃุฎุทุงุก                                      โ
echo โ                                                              โ
echo โ  ๐ http://localhost:5000                                    โ
echo โ  ๐ admin / admin123                                         โ
echo โ                                                              โ
echo โ  ๐ ุงููุชุตูุญ ุณููุชุญ ุชููุงุฆูุงู ุฎูุงู 3 ุซูุงู                       โ
echo โ  ๐ ุฑุงูุจ ุฑุณุงุฆู ุงูุชุดุฎูุต ูู ูุฐู ุงููุงูุฐุฉ                       โ
echo โ  โ๏ธ  ูุฅููุงู ุงููุธุงู: ุงุถุบุท Ctrl+C                             โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.

echo ๐ ุชุดุบูู ุงููุณุฎุฉ ุงูููุตุญุญุฉ...
echo.
echo โโโโโโโโโโโโโโโ ุฑุณุงุฆู ุงูุชุดุฎูุต โโโโโโโโโโโโโโโ

REM ูุชุญ ุงููุชุตูุญ ุจุนุฏ 3 ุซูุงู
start "" cmd /c "timeout /t 3 /nobreak >nul && start http://localhost:5000"

REM ุชุดุบูู ุงููุณุฎุฉ ุงูููุตุญุญุฉ
%PYTHON_CMD% app_fixed.py

echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ                    ุชู ุฅููุงู ุงููุธุงู                          โ
echo โ                                                              โ
echo โ  โ ุงููุณุฎุฉ ุงูููุตุญุญุฉ ุนููุช ุจูุฌุงุญ                              โ
echo โ  ๐ ุงูุฑุงุจุท: http://localhost:5000                           โ
echo โ  ๐ ุงูุจูุงูุงุช: admin / admin123                              โ
echo โ                                                              โ
echo โ  ๐ ุชู ุญู ุฌููุน ูุดุงูู:                                       โ
echo โ     โข ุชุณุฌูู ุงูุฏุฎูู                                          โ
echo โ     โข ุงูุงูุชูุงู ูููุงุฌูุฉ ุงูุฑุฆูุณูุฉ                             โ
echo โ     โข ุฅุนุงุฏุฉ ุงูุชูุฌูู ุงููุณุชูุฑุฉ                                โ
echo โ     โข ูุดุงูู ุงูุฌูุณุงุช                                         โ
echo โ                                                              โ
echo โ                RASHID INDUSTRIAL CO.                        โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
pause