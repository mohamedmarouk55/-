# ุชูุฑูุฑ ุญู ูุดููุฉ UndefinedError ุงูููุงุฆู

## โ ุชู ุญู ุงููุดููุฉ ุจูุฌุงุญ!

---

## ๐ ุงููุดููุฉ ุงูุฃุตููุฉ:
```
jinja2.exceptions.UndefinedError: 'str object' has no attribute 'get'
TypeError: unsupported format string passed to Undefined.__format__
```

---

## ๐ต๏ธ ุงูุชุญููู ูุงูุงูุชุดุงู:

### 1. **ูุดููุฉ ูู ุตูุญุฉ ุงูููุธููู:**
- **ุงููููุน:** ูุงูุจ `employees.html` ุงูุณุทุฑ 118
- **ุงูููุฏ ุงูููุดููู:** `{{ "{:,.0f}".format(total_salaries) }}`
- **ุงูุณุจุจ:** ุงููุชุบูุฑ `total_salaries` ุบูุฑ ูุนุฑู ูู route ุงูููุธููู

### 2. **ูุดููุฉ ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช:**
- **ุงููููุน:** ูุงูุจ `settings.html` ุงูุณุทุฑ 59
- **ุงูููุฏ ุงูููุดููู:** `{{ settings.get('company_name', {}).get('value', 'RASHID INDUSTRIAL CO.') }}`
- **ุงูุณุจุจ:** ุงููุงูุจ ูุชููุน ูุงููุณ ูู ุงูููุงููุณุ ููู route ูุฑุณู ูุงููุณ ุจุณูุท

### 3. **ูุดููุฉ ูู ุตูุญุฉ ุงูุณูุงุฑุงุช:**
- **ุงููููุน:** ูุงูุจ `cars.html`
- **ุงูููุฏ ุงูููุดููู:** `{{ "{:,.0f}".format(total_purchase_price) }}`
- **ุงูุณุจุจ:** ุงููุชุบูุฑุงุช ุงููุงููุฉ ุบูุฑ ูุนุฑูุฉ ูู route ุงูุณูุงุฑุงุช

---

## ๐๏ธ ุงูุญููู ุงููุทุจูุฉ:

### โ ุฅุตูุงุญ route ุงูููุธููู
```python
@app.route('/employees')
@login_required
def employees():
    try:
        conn = get_db_connection()
        employees_data = conn.execute('SELECT * FROM employees ORDER BY created_at DESC').fetchall()
        
        # ุญุณุงุจ ุงูุฅุญุตุงุฆูุงุช
        total_salaries = 0.0
        average_salary = 0.0
        
        if employees_data:
            for employee in employees_data:
                salary = float(employee[5]) if employee[5] else 0.0  # ุงูุนููุฏ ุงูุตุญูุญ
                total_salaries += salary
            
            average_salary = total_salaries / len(employees_data) if len(employees_data) > 0 else 0.0
        
        conn.close()
        return render_template('employees.html', 
                             employees=employees_data,
                             total_salaries=total_salaries,
                             average_salary=average_salary)
    except Exception as e:
        return render_template('employees.html', 
                             employees=[],
                             total_salaries=0.0,
                             average_salary=0.0)
```

### โ ุฅุตูุงุญ route ุงูุณูุงุฑุงุช
```python
@app.route('/cars')
@login_required
def cars():
    try:
        conn = get_db_connection()
        cars_data = conn.execute('SELECT * FROM cars ORDER BY created_at DESC').fetchall()
        
        # ุญุณุงุจ ุงูุฅุญุตุงุฆูุงุช ุงููุงููุฉ
        total_purchase_price = 0.0
        total_current_value = 0.0
        
        if cars_data:
            for car in cars_data:
                purchase_price = float(car[7]) if car[7] else 0.0
                current_value = float(car[8]) if car[8] else 0.0
                total_purchase_price += purchase_price
                total_current_value += current_value
        
        conn.close()
        return render_template('cars.html', 
                             cars=cars_data,
                             total_purchase_price=total_purchase_price,
                             total_current_value=total_current_value)
    except Exception as e:
        return render_template('cars.html', 
                             cars=[],
                             total_purchase_price=0.0,
                             total_current_value=0.0)
```

### โ ุฅุตูุงุญ ูุงูุจ ุงูุฅุนุฏุงุฏุงุช
```html
<!-- ูุจู ุงูุฅุตูุงุญ (ููุดููู) -->
value="{{ settings.get('company_name', {}).get('value', 'RASHID INDUSTRIAL CO.') }}"

<!-- ุจุนุฏ ุงูุฅุตูุงุญ (ุขูู) -->
value="{{ settings.get('company_name', 'RASHID INDUSTRIAL CO.') }}"
```

---

## ๐ ุงูุฅุตูุงุญุงุช ุงูุชูุตูููุฉ:

### 1. **ูุงูุจ ุงูููุธููู (employees.html):**
- โ ุฅุถุงูุฉ ูุชุบูุฑุงุช `total_salaries` ู `average_salary` ูู route
- โ ุญุณุงุจ ุขูู ููุฅุญุตุงุฆูุงุช ูุน ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- โ ููู ุงูุชุฑุงุถูุฉ ุนูุฏ ุนุฏู ูุฌูุฏ ุจูุงูุงุช

### 2. **ูุงูุจ ุงูุณูุงุฑุงุช (cars.html):**
- โ ุฅุถุงูุฉ ูุชุบูุฑุงุช `total_purchase_price` ู `total_current_value` ูู route
- โ ุญุณุงุจ ุขูู ููููู ุงููุงููุฉ
- โ ูุนุงูุฌุฉ ุงูููู ุงููุงุฑุบุฉ ูุงูู NULL

### 3. **ูุงูุจ ุงูุฅุนุฏุงุฏุงุช (settings.html):**
- โ ุชุจุณูุท ูุฑุงุฌุน ุงููุงููุณ ูู `.get().get()` ุฅูู `.get()`
- โ ุฅุฒุงูุฉ ุงูุชุนููุฏ ุบูุฑ ุงูุถุฑูุฑู
- โ ููู ุงูุชุฑุงุถูุฉ ูุงุถุญุฉ

---

## ๐ฏ ุงูููุฒุงุช ุงููุญุณูุฉ:

### 1. **ุงุณุชูุฑุงุฑ ุงููุธุงู**
- โ ุนุฏู ุชุนุทู ุงูุตูุญุงุช ุนูุฏ ูุฌูุฏ ุจูุงูุงุช ูุงูุตุฉ
- โ ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก
- โ ููู ุงูุชุฑุงุถูุฉ ุขููุฉ

### 2. **ุฃุฏุงุก ูุญุณู**
- โ ุญุณุงุจ ุงูุฅุญุตุงุฆูุงุช ูู ุงูุฎุงุฏู
- โ ุชูููู ุงูุนูููุงุช ูู ุงูููุงูุจ
- โ ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุจูุงูุงุช ูุญุณูุฉ

### 3. **ุณูููุฉ ุงูุตูุงูุฉ**
- โ ููุฏ ุฃุจุณุท ูุฃูุถุญ
- โ ุชูููู ุงูุชุนููุฏ ูู ุงูููุงูุจ
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ููุญุฏุฉ

---

## ๐งช ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ:

### โ ุตูุญุฉ ุงูููุธููู:
```
๐ ุนุฏุฏ ุงูููุธููู: ูุนุฑุถ ุจุดูู ุตุญูุญ
๐ฐ ุฅุฌูุงูู ุงูุฑูุงุชุจ: ูุญุณุจ ุจุดูู ุตุญูุญ
๐ ูุชูุณุท ุงูุฑุงุชุจ: ูุญุณุจ ุจุดูู ุตุญูุญ
```

### โ ุตูุญุฉ ุงูุณูุงุฑุงุช:
```
๐ ุนุฏุฏ ุงูุณูุงุฑุงุช: ูุนุฑุถ ุจุดูู ุตุญูุญ
๐ฐ ุฅุฌูุงูู ูููุฉ ุงูุดุฑุงุก: ูุญุณุจ ุจุดูู ุตุญูุญ
๐ ุฅุฌูุงูู ุงููููุฉ ุงูุญุงููุฉ: ูุญุณุจ ุจุดูู ุตุญูุญ
```

### โ ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช:
```
๐ข ูุนูููุงุช ุงูุดุฑูุฉ: ุชุนุฑุถ ุจุดูู ุตุญูุญ
โ๏ธ ุฅุนุฏุงุฏุงุช ุงููุธุงู: ุชุนูู ุจุดูู ุตุญูุญ
๐พ ุญูุธ ุงูุฅุนุฏุงุฏุงุช: ูุนูู ุจุดูู ุตุญูุญ
```

---

## ๐ ุงููุธุงู ุฌุงูุฒ:

**ุงูุฑุงุจุท:** http://localhost:5000  
**ุงุณู ุงููุณุชุฎุฏู:** admin  
**ูููุฉ ุงููุฑูุฑ:** admin123

### ๐ ุงูุตูุญุงุช ุงูููุตุญุญุฉ:
- โ `/employees` - ุตูุญุฉ ุงูููุธููู ุชุนูู ุจุดูู ูุซุงูู
- โ `/cars` - ุตูุญุฉ ุงูุณูุงุฑุงุช ุชุนูู ุจุดูู ูุซุงูู
- โ `/settings` - ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช ุชุนูู ุจุดูู ูุซุงูู
- โ `/add_employee` - ุฅุถุงูุฉ ููุธู ุฌุฏูุฏ
- โ `/add_car` - ุฅุถุงูุฉ ุณูุงุฑุฉ ุฌุฏูุฏุฉ
- โ `/treasury` - ุฅุฏุงุฑุฉ ุงูุฎุฒููุฉ
- โ `/expenses` - ุฅุฏุงุฑุฉ ุงููุตุฑููุงุช

---

## ๐ ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญ:

### 1. **ุงุฎุชุจุงุฑ ุตูุญุฉ ุงูููุธููู:**
- ุงุฐูุจ ุฅูู: http://localhost:5000/employees
- ุชุฃูุฏ ูู ุธููุฑ ุงูุฅุญุตุงุฆูุงุช ุจุดูู ุตุญูุญ
- ุชุฃูุฏ ูู ุนุฏู ุธููุฑ ุฃู ุฃุฎุทุงุก UndefinedError

### 2. **ุงุฎุชุจุงุฑ ุตูุญุฉ ุงูุณูุงุฑุงุช:**
- ุงุฐูุจ ุฅูู: http://localhost:5000/cars
- ุชุฃูุฏ ูู ุธููุฑ ุฅุญุตุงุฆูุงุช ุงูุฃุณุนุงุฑ
- ุชุฃูุฏ ูู ุนูู ุฌููุน ุงููุธุงุฆู

### 3. **ุงุฎุชุจุงุฑ ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช:**
- ุงุฐูุจ ุฅูู: http://localhost:5000/settings
- ุชุฃูุฏ ูู ุธููุฑ ุฌููุน ุงูุญููู ุจุดูู ุตุญูุญ
- ุฌุฑุจ ุญูุธ ุฅุนุฏุงุฏุงุช ุฌุฏูุฏุฉ

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

**โ ุชู ุญู ุฎุทุฃ UndefinedError ุจุดูู ููุงุฆู!**

- ุฌููุน ุงูุตูุญุงุช ุชุนูู ุจุฏูู ุฃุฎุทุงุก
- ุงูุฅุญุตุงุฆูุงุช ุชูุญุณุจ ูุชูุนุฑุถ ุจุดูู ุตุญูุญ
- ุงูููุงูุจ ูุจุณุทุฉ ูุฃูุซุฑ ุงุณุชูุฑุงุฑุงู
- ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก
- ุฃุฏุงุก ูุญุณู ูุณุฑุนุฉ ุฃูุจุฑ

**ุงููุธุงู ูุณุชูุฑ ูุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูุฅูุชุงุฌู!** ๐

---

## ๐ ุฏุฑูุณ ูุณุชูุงุฏุฉ:

1. **ุชุฃูุฏ ูู ุชูุฑูุฑ ุฌููุน ุงููุชุบูุฑุงุช ุงููุทููุจุฉ ููููุงูุจ**
2. **ุงุณุชุฎุฏู ููู ุงูุชุฑุงุถูุฉ ุขููุฉ ูู ุฌููุน ุงูุญุงูุงุช**
3. **ุชุฌูุจ ุงูุชุนููุฏ ุบูุฑ ุงูุถุฑูุฑู ูู ุงูููุงูุจ**
4. **ุงุฎุชุจุฑ ุฌููุน ุงูุตูุญุงุช ุจุนุฏ ูู ุชุนุฏูู**
5. **ุงุณุชุฎุฏู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงูุดุงููุฉ ูู ุฌููุน routes**

---

## ๐ง ูุตุงุฆุญ ูููุทูุฑูู:

### ุนูุฏ ุฅุถุงูุฉ ูุชุบูุฑุงุช ุฌุฏูุฏุฉ ููููุงูุจ:
```python
# โ ุงูุทุฑููุฉ ุงูุตุญูุญุฉ
return render_template('template.html', 
                     data=data,
                     total=total or 0,
                     average=average or 0.0)

# โ ุชุฌูุจ ูุฐุง
return render_template('template.html', data=data)
# ุจุฏูู ุชูุฑูุฑ ุงููุชุบูุฑุงุช ุงููุทููุจุฉ
```

### ูู ุงูููุงูุจ:
```html
<!-- โ ุงูุทุฑููุฉ ุงูุตุญูุญุฉ -->
{{ variable|default(0) }}
{{ "{:,.0f}".format(total_amount|default(0)) }}

<!-- โ ุชุฌูุจ ูุฐุง -->
{{ variable }}
{{ "{:,.0f}".format(undefined_variable) }}
```

---

*ุชู ุฅูุดุงุก ูุฐุง ุงูุชูุฑูุฑ ุจุนุฏ ุงูุญู ุงูููุงุฆู ููุดููุฉ UndefinedError*  
*ูุธุงู ุฅุฏุงุฑุฉ ุงูุณูุงุฑุงุช ุงูุดุงูู - RASHID INDUSTRIAL CO.*